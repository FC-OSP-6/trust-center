/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  TL;DR  --> shared expansion primitives for shadow-dom components

  why this exists:
  - shadow dom isolates styles, so each component must import shared primitives explicitly
  - tokens keep sizing + motion consistent across all expandable ui

  what it provides:
  - aonToggleIcon: plus/minus icon made from 2 bars
  - aonRevealWrap/aonRevealInner: "pull down" reveal with bottom-first text
  - ease-out only (snappy), using global motion tokens
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */

/* ---------- +/- toggle ---------- */

.aon-toggle-icon {
  width: var(--toggle-icon-size);
  height: var(--toggle-icon-size);
  position: relative;
  display: inline-block;
}

.aon-toggle-bar-h,
.aon-toggle-bar-v {
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--toggle-bar-length);
  height: var(--toggle-bar-thickness);
  background: var(--color-teal-dark-secondary);
  transform: translate(-50%, -50%);
  border-radius: var(--toggle-bar-radius);
}

/* start as vertical bar (plus sign) */
.aon-toggle-bar-v {
  transform: translate(-50%, -50%) rotate(90deg);
  transform-origin: center;
  transition: transform var(--motion-toggle-ms) var(--motion-ease-out);
}

/* open => rotate clockwise so it visually collapses into "-" */
.aon-toggle-icon.is-open .aon-toggle-bar-v {
  transform: translate(-50%, -50%) rotate(180deg);
}

/* ---------- bottom-first reveal ---------- */
/*
  design goal:
  - container expands downward from the title row
  - the text itself reveals bottom-first (you see the bottom before the top)

  mechanics:
  - aonRevealWrap: opens layout space using 0fr -> 1fr
  - aonRevealInner: clips from top (clip-path inset top=100%) -> top=0
*/

.aon-reveal-wrap {
  display: grid;
  grid-template-rows: 0fr;
  opacity: 0;
  transition:
    grid-template-rows calc(var(--motion-reveal-ms) * 1.5)
      var(--motion-ease-out),
    opacity 300ms var(--motion-ease-out);
}

.aon-reveal-wrap.is-open {
  grid-template-rows: 1fr;
  opacity: 1;
}

.aon-reveal-inner {
  overflow: hidden;

  /* typography defaults; components can override if needed */
  font-weight: var(--font-weight-regular);
  font-size: var(--font-size-small);
  line-height: var(--line-height-small);
  color: var(--color-gray-01);

  /* bottom-first reveal */
  clip-path: inset(100% 0 0 0);
  transform: translateY(-6px);

  /* micro-delay: container opens first, then glyphs reveal */
  transition:
    clip-path var(--motion-reveal-ms) cubic-bezier(0.22, 1, 0.75, 1)
      var(--motion-reveal-delay-ms),
    transform var(--motion-reveal-ms) cubic-bezier(0.22, 1, 0.6, 1)
      calc(var(--motion-reveal-delay-ms) + 20ms);

  will-change: clip-path, transform;
}

.aon-reveal-wrap.is-open .aon-reveal-inner {
  clip-path: inset(0 0 0 0);
  transform: translateY(0);
}
